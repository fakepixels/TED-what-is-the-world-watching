<!DOCTYPE html>
<html>
<head>
<meta name="authors" content="Vaidehi Garg (vg254) and Tina He (mh2235)">
<title>INFO 3300: Project 1</title>
<link href="https://fonts.googleapis.com/css?family=Playfair+Display" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Karma" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Krona+One" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Bowlby+One+SC" rel="stylesheet">
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://d3js.org/topojson.v2.min.js"></script>
<style>
  h1 { font-size: 220px; color: #E62B1E; margin: -10px;}
  h2 {font-size: 20px; font-family: 'Krona One', sans-serif, serif}
  p { font-family: 'Karma', serif; max-width: 35%; align-content: center;}
  #title { padding: -20px;}
  #introduction { margin: -20px; padding: 80px; background-color: #F5F5F5;}
  #cloudSection { margin: -20px; padding: 80px; background-color: #E62B1E;}
  #ratingSection { margin: -20px; padding: 80px; background-color: #ECECEC;}
  #durationSection { margin: -20px; padding: 80px; background-color: #F3F3F3;}
  #end { margin: -20px; padding: 250px; position: relative;}
  #ending-bkgd { font-family: 'Krona One', sans-serif; font-size: 110px; opacity: 0.05; position: absolute; top: 15; left: 0;bottom: 30; right: 0; z-index: -20; overflow: hidden;}
</style>
</head>

<body>

<!-- HEADER -->
<section id="introduction">
    <div id="header" align="center" style="font-family: 'Karma', serif";>
        <p>INFO 3300: Project 1 <br>Vaidehi Garg (vg254) and Tina He (mh2235)</p>
    </div>  
    <div id="title" align="center" style="font-family: 'Krona One', sans-serif, serif">
        <h1>TED</h1>
        <h2> What Is The World Watching? </h2>
        <p>We try to see what TED talks data tell us about what people care about in the 21st century. This dataset has details on 2550 ted talks with which we intend to bring out interesting information and key insights on the TED talks.</p>
    </div>
</section>
<!-- END HEADER -->

<!-- VISUALIZATION 1: TAG WORD CLOUD -->
<section id="cloudSection" align="center">
<div id="cloud" align="center">

<script>

d3.select("#cloud").append("svg")
.attr("id", "tagSVG")
.attr("width", 1000)
.attr("height", 400);

var tagSVG = d3.select("#tagSVG");

var tagData;

d3.queue()
.defer(d3.json, "tags.json")
.await(callback);

/* Returns random integer between min and max (both inclusive) */
function randInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function callback(error, data) {
  tagData = data;

  var count = 0;
  var x_vals = [333, 370, 615, 296, 250, 735, 760, 590, 200, 230, 535, 750, 505, 314, 622, 605, 667, 180, 500, 405, 425, 382, 490, 450, 580];
  var y_vals = [452, 250, 400, 273, 350, 243, 396, 460, 400, 426, 375, 340, 316, 215, 260, 495, 434, 310, 400, 327, 489, 415, 340, 450, 230];

  tagData.forEach(function (d, i) {
    var num = d.count;

    if (num > 150) {
      // console.log(d.tag + ", x: " + x_vals[count].toString() + ", y: " + y_vals[count].toString());
      tagSVG.append("text")
      .attr("x", x_vals[count])
      .attr("y", y_vals[count]-150)
      .text(d.tag)
      .style("font-size", num/10)
      .attr("font-family",'Bowlby One SC, cursive')
      .style("fill", "#FFFFFF")
      .style("opacity", 1-(num/1200))
      .style("text-anchor", "middle");
      count++;
    }
  });
}

</script>
    <h2 style="color:white"> Most Frenquently Mentioned Words </h2>
    <p style="color:white">We are curious about which words are most often used by TED Speakers. Could we create a Word Cloud out of all TED Speeches? Luckily, d3 has a very powerful word cloud generating library that allows us to do that.</p>
</div>
</section>
<!-- END VISUALIZATION 1 -->

<!-- VISUALIZATION 2: RANK BAR GRAPH -->
<section id="ratingSection">
<div id="ratings" align="center">

<script>

d3.select("#ratings").append("svg")
.attr("id", "ratingSVG")
.attr("width", 1000)
.attr("height", 750);

var ratingSVG = d3.select("#ratingSVG");

var ratingData;

d3.queue()
.defer(d3.json, "ratings.json")
.await(callback);

function callback(error, data) {
  ratingData = data;

  var countScale = d3.scaleLog()
  .base(10)
  .domain([50000,2000000])
  .range([575,25])

  var indexScale = d3.scaleLinear()
  .domain([-1,14])
  .range([150,950])

  var countAxis = d3.axisLeft(countScale)
  .tickFormat(d3.format(",.0f"))
  .ticks(10);

  var reaction_labels = ["Funny", "Beautiful", "Ingenious", "Courageous", 
  "Longwinded", "Confusing", "Informative", "Fascinating", "Unconvincing", 
  "Persuasive", "Jaw-dropping", "OK", "Obnoxious", "Inspiring"];
  var indexAxis = d3.axisBottom(indexScale)
  .ticks(14)
  .tickFormat(function(d, i){
    if (i > 0 && i < 15) return reaction_labels[d];
  });

  ratingSVG.append("g")
  .call(countAxis)
  .attr("transform", "translate(150, 0)")
  .attr("font-size",12)
  .attr("font-family",'Krona One, sans-serif')

  ratingSVG.append("g")
  .call(indexAxis)
  .attr("transform", "translate(0, 575)")
  .attr("font-size",12)
  .attr("font-family",'Krona One, sans-serif')
  .selectAll("text")  
        .style("text-anchor", "end")
        .attr("dx", "-.8em")
        .attr("dy", ".15em")
        .attr("transform", "rotate(-65)");

  ratingData.forEach(function (d, i) {
    ratingSVG.append("line")
    .attr("x1", indexScale(i))
    .attr("y1", 575)
    .attr("x2", indexScale(i))
    .attr("y2", countScale(d.count))
    .style("stroke-width", 28)
    .style("stroke", "red");

    if (d.rating != "Jaw-dropping" ) {
      ratingSVG.append("svg:image")
      .attr('x', indexScale(i)-12.5)
      .attr('y', countScale(d.count)-25)
      .attr('width', 25)
      .attr('height', 25)
      .attr("xlink:href", "emoji/" + d.rating + ".svg");
    }
    else {
      ratingSVG.append("svg:image")
      .attr('x', indexScale(i)-20)
      .attr('y', countScale(d.count)-40)
      .attr('width', 40)
      .attr('height', 40)
      .attr("xlink:href", "emoji/" + d.rating + ".svg");
    }

    
  });

  ratingSVG.append("text")
      .text("Audience Reaction")
      .style("text-anchor", "middle")
      .attr("transform", "translate (525,725)")
      .attr("font-size",14)
      .attr("font-family",'Krona One, sans-serif');

  ratingSVG.append("text")
      .text("Count")
      .style("text-anchor", "middle")
      .attr("x", "3%")
      .attr("y", "50%")
      .attr("transform", "rotate (270, 0, 320)")
      .attr("font-size",14)
      .attr("font-family",'Krona One, sans-serif');

}

</script>
    <h2 style="color:#2B2B2B"> What kinds of emotions do they evoke? </h2>
    <p style="color:#2B2B2B">We are curious to see what kind of emotions these talks evoke. We are more curious to learn what are the most common responses to these talks.</p>
</div>
</section>
<!-- END VISUALIZATION 2 -->

<!-- VISUALIZATION 3: DURATION HISTOGRAM -->
<section id="durationSection">
<div id="durations" align="center"></div>

<script>

d3.select("#durations").append("svg")
.attr("id", "durationSVG")
.attr("width", 900)
.attr("height", 600);

var durationSVG = d3.select("#durationSVG");

var durationData;

d3.queue()
.defer(d3.json, "durations.json")
.await(callback);

function callback(error, data) {
  durationData = data;

  var countScale = d3.scaleLinear()
  //.base(10)
  .domain([1,1500])
  .range([575,25])

  var indexScale = d3.scaleLinear()
  .domain([0,12])
  .range([125,800])

  var countAxis = d3.axisLeft(countScale)
  .ticks(10);

  var indexAxis = d3.axisBottom(indexScale)
  .ticks(15);

  durationSVG.append("g")
  .call(countAxis)
  .attr("transform", "translate(100, 0)")

  durationSVG.append("g")
  .call(indexAxis)
  .attr("transform", "translate(0, 575)")

  durationData.forEach(function (d, i) {
      durationSVG.append("line")
      .attr("x1", indexScale(i))
      .attr("y1", 575)
      .attr("x2", indexScale(i))
      .attr("y2", countScale(d.count))
      .style("stroke-width", 2)
      .style("stroke", "#E62B1E");
  });
}

</script>
</section>
<!-- END VISUALIZATION 3 -->

<section id="end" align="center">
<div id="ending-bkgd">What's next?</div>
<div id="ending" align="center">
    <h2>What's next?</h2>
    <p>In the future, we want to be able to analyze what are the elements that make an effective TED talk. The information can inform us about not just cultural trends, but also public speaking skills.</p>
</div>
</section>

</body>
</html>
